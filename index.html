<!DOCTYPE html>
<html>

<head>
  <title>Studio Week 4</title>
  <!--Leaflet style sheet and Library --->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="./leaflet-heat.js"></script>
  <!-- stylesheet for social media icons --->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- stylesheet for fonts --->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
  <style>
  /* Row 1 Maps */
      #mapId { /* Main Final Map Center Top */
      position: absolute;
      margin-bottom: 1%;
      height: inherit;
      top: 250px;
      bottom: 20%;
      width: 100%;
        }
      #map_steps { /* Left Container with Text */
      position: absolute;
      margin-top: 1%;
      margin-bottom: 1%;
      margin-left: 1%;
      top: 60%;
      height: 24.5%;
      width: 24.5%;
      text-align: center;
      display: flex;
        }
      .maps {
        position: absolute;
        top: 80%;
        width: 100%;
        text-align: center;
        display: flex;
      }
      .gallery {
        width: 100%;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-gap: 1%;
      }
  </style>
  <!-- Adding styling info for page layout by reading in a CSS file -->
  <link rel="stylesheet" href="styles.css">

</head>

<body>
  <div>
    <a href="https://www.linkedin.com/in/caroline-ann-williams-research-assistant-tech-support/"><i class="fa fa-linkedin"></i></a>
    <a href="https://github.com/cawilliams719"><i class="fa fa-github"></i></a>
  </div>

  <h1>Studio Week 4 <br> Boston Rat Map </h1>
  <!-- Add multiple pages to web page-->
  <!-- active class displays the grey box around current page-->
  <ul>
  	<li><a class="active" href="index.html" target="_self">Output 1</a></li>
    <li><a href="sheet_mapper.html" target="_self">Output 2</a></li>
    <li><a href="adventure.html" target="_self">Output 3</a></li>
  </ul>
  <br>

  <!-- div map container -->
  <div id="mapId"></div>
  <!-- Map Gallery of Steps 1 through 7 -->
<div class="maps">
    <div class="gallery">
      <h2>Steps 1-7 of Tutorial</h2>
    <iframe src="map_s1.html" style="border:none;" height="300" width="100%"></iframe>
    <iframe src="map_s2.html" style="border:none;" height="300" width="100%"></iframe>
    <iframe src="map_s3.html" style="border:none;" height="300" width="100%"></iframe>
    <iframe src="map_s4.html" style="border:none;" height="300" width="100%"></iframe>
    <iframe src="map_s5.html" style="border:none;" height="300" width="100%"></iframe>
    <iframe src="map_s6.html" style="border:none;" height="300" width="100%"></iframe>
  </div>
</div>
  <script>
  // Main Heat Map
  // initialize the map
  var map = L.map('mapId').setView([42.35, -71.08], 13);
  // load a tile layer
  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
  attribution: '<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">Carto</a> | Data by <a href="http://mass.gov/mgis">MassGIS</a>',
    maxZoom: 17,
    minZoom: 9
  }).addTo(map);
   $.getJSON("neighborhoods.geojson",function(hoodData){
    L.geoJson( hoodData , {
    style: function(feature){
      var fillColor,
          density = feature.properties.density;
      if ( density > 80 ) fillColor = "#006837";
      else if ( density > 40 ) fillColor = "#31a354";
      else if ( density > 20 ) fillColor = "#78c679";
      else if ( density > 10 ) fillColor = "#c2e699";
      else if ( density > 0 ) fillColor = "#ffffcc";
      else fillColor = "#f7f7f7";  // no data
      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
    },
    onEachFeature: function( feature, layer ){
      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " rats per square mile" )
    }
  }).addTo(map);
});
  $.getJSON("rodents.geojson",function(data){
    var ratIcon = L.icon({
      iconUrl: 'rat.png',
      iconSize: [60,50]
    });
    var rodents = L.geoJson(data,{
      pointToLayer: function(feature,latlng){
        var marker = L.marker(latlng,{icon: ratIcon});
        marker.bindPopup(feature.properties.Location + '<br/>' + feature.properties.OPEN_DT);
        return marker;
      }
    });
    var clusters = L.markerClusterGroup();
    clusters.addLayer(rodents);
    map.addLayer(clusters);
  });

  </script>
</body>
</html>
